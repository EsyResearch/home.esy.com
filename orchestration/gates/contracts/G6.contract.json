{
  "gate": "G6",
  "name": "Citation Audit",
  "blocking": true,
  "description": "Validates that all sources are verified, quotes authenticated, no broken links, and content matches research. Audit report must not indicate failure or rejection.",
  "required_outputs": {
    "any_of": [
      {
        "path": "{artifact_path}/research/CITATION-AUDIT.md",
        "description": "Citation audit report from Citation Audit Agent"
      },
      {
        "path": "{artifact_path}/CITATION-AUDIT.md",
        "description": "Citation audit report (essay root level)"
      }
    ]
  },
  "validations": [
    {
      "type": "file_exists",
      "target": "any_of",
      "description": "Citation audit report must exist"
    },
    {
      "type": "not_contains",
      "target": "{artifact_path}/research/CITATION-AUDIT.md",
      "pattern": "status: FAIL",
      "severity": "error",
      "description": "Citation audit must not have FAIL status in frontmatter"
    },
    {
      "type": "not_contains",
      "target": "{artifact_path}/research/CITATION-AUDIT.md",
      "pattern": "Citation Certification: Rejected",
      "severity": "error",
      "description": "Citation audit must not have Rejected certification"
    },
    {
      "type": "frontmatter_status",
      "target": "{artifact_path}/research/CITATION-AUDIT.md",
      "checks": {
        "status": {
          "not": "FAIL"
        }
      },
      "severity": "error",
      "description": "Frontmatter status must not be FAIL (parsed from YAML, not string match)"
    }
  ],
  "notes": "G6 validates the Citation Audit Agent has verified all sources (80%+ Tier 1-2), authenticated quotes, checked link health, and confirmed content-research alignment. The audit file location varies by essay (some at root, some in research/). The not_contains and frontmatter_status checks both verify the audit didn't reject the citations. Citation Certification (Approved/Rejected) is recorded in the audit report. The not_contains validation now resolves to the actual existing any_of file path."
}
