{
  "gate": "G4.5",
  "name": "Image Sourcing",
  "blocking": true,
  "description": "Validates that all images are sourced, URLs extracted, licenses verified, and no unlicensed assets remain",
  "required_outputs": {
    "any_of": [
      {
        "path": "{artifact_path}/research/IMAGE_RESEARCH_AUDIT.md",
        "description": "Image research audit with sourced images and license verification"
      },
      {
        "path": "{artifact_path}/research/IMAGE-DOCUMENTATION.md",
        "description": "Image documentation with sourced images and license verification"
      },
      {
        "path": "{artifact_path}/images-migration.json",
        "description": "Image migration manifest with URLs and attribution"
      },
      {
        "path": "{artifact_path}/images.ts",
        "description": "TypeScript image data with URLs and attribution"
      }
    ]
  },
  "validations": [
    {
      "type": "file_exists",
      "target": "any_of",
      "description": "At least one image sourcing artifact must exist"
    },
    {
      "type": "not_contains",
      "target": "{artifact_path}/research/IMAGE_RESEARCH_AUDIT.md",
      "pattern": "[UNLICENSED]",
      "severity": "error",
      "description": "Image audit must not contain unlicensed assets"
    },
    {
      "type": "not_contains",
      "target": "{artifact_path}/research/IMAGE_RESEARCH_AUDIT.md",
      "pattern": "[PENDING]",
      "severity": "warning",
      "description": "Image audit should not have pending sourcing tasks"
    },
    {
      "type": "not_contains",
      "target": "{artifact_path}/research/IMAGE_RESEARCH_AUDIT.md",
      "pattern": "status: FAIL",
      "severity": "error",
      "description": "Image audit must not have FAIL status in frontmatter"
    }
  ],
  "notes": "G4.5 is flexible because image sourcing artifacts vary by essay. Some essays use SVG-only illustrations (no external images), in which case the IMAGE_RESEARCH_AUDIT.md may document 'No External Images Required' and still pass. The any_of pattern accommodates different formats. [UNLICENSED] is a hard fail; [PENDING] is a warning."
}
