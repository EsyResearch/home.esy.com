/* ============================================================================
   SAMMY SNAIL'S SUPER SPEED DAY - Visual Design System
   A magical speed adventure for ages 4-5
   ============================================================================ */

/* ============================================================================
   DESIGN TOKENS
   ============================================================================ */

.sammy-story {
  /* Forest Palette */
  --sky-morning: #87CEEB;
  --sky-sunset: #FFB347;
  --forest-green-light: #7CB342;
  --forest-green: #558B2F;
  --forest-green-dark: #33691E;
  --grass: #8BC34A;
  
  /* Sammy Colors */
  --sammy-body: #FFE4B5;
  --sammy-shell: #FFB347;
  --sammy-shell-glow: #FFD700;
  --sammy-blush: #FFB6C1;
  
  /* Magic & Speed */
  --magic-glow: #FFD700;
  --speed-trail: #87CEEB;
  --rainbow-1: #FF6B6B;
  --rainbow-2: #FFD93D;
  --rainbow-3: #6BCB77;
  --rainbow-4: #4D96FF;
  --rainbow-5: #9B59B6;
  
  /* UI */
  --text-dark: #2C3E50;
  --text-light: #FFFFFF;
  
  /* Typography */
  --font-display: "Fredoka", "Comic Sans MS", sans-serif;
  --font-body: "Nunito", system-ui, sans-serif;
  
  /* Sizes */
  --text-title: clamp(2rem, 6vw, 3.5rem);
  --text-big: clamp(1.75rem, 5vw, 2.5rem);
  --text-body: clamp(1.25rem, 3.5vw, 1.75rem);
  --text-small: clamp(1rem, 2.5vw, 1.25rem);
  
  /* Animation */
  --ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
  --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-speed: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  
  /* Touch */
  --touch-min: 56px;
}

/* ============================================================================
   BASE LAYOUT
   ============================================================================ */

.sammy-story {
  font-family: var(--font-body);
  background: var(--sky-morning);
  color: var(--text-dark);
  min-height: 100vh;
  overflow-x: hidden;
}

/* ============================================================================
   PROGRESS INDICATOR (Snail-themed)
   ============================================================================ */

.snail-progress {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 1000; /* Higher than everything */
  padding: 0.75rem 1rem;
  padding-top: calc(0.75rem + env(safe-area-inset-top, 0px));
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.progress-track {
  position: relative;
  height: 12px;
  max-width: 300px;
  margin: 0 auto;
  background: #E8E8E8;
  border-radius: 6px;
  overflow: visible;
}

.progress-slime {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  background: linear-gradient(90deg, #A8E6CF, #7CB342);
  border-radius: 6px;
  transition: width 0.3s var(--ease-smooth);
}

.progress-snail {
  position: absolute;
  top: 50%;
  transform: translate(-50%, -50%);
  font-size: 1.5rem;
  transition: left 0.3s var(--ease-smooth);
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
}

/* ============================================================================
   SECTION BASE
   ============================================================================ */

.sammy-section {
  position: relative;
  min-height: 100dvh;
  padding: 2rem;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  /* Initially visible for all sections */
  opacity: 1;
  transform: translateY(0);
}

.sammy-section.full-bleed {
  padding: 2rem;
}

.sammy-section.slow-mode {
  scroll-snap-type: y mandatory;
}

.scene-content {
  position: relative;
  z-index: 10;
  width: 100%;
  max-width: 600px;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

/* ============================================================================
   SAMMY CHARACTER
   ============================================================================ */

.sammy-container {
  position: relative;
  width: clamp(120px, 30vw, 180px);
  transition: transform 0.3s var(--ease-bounce);
}

.sammy-container.zooming {
  animation: sammy-zoom 0.3s var(--ease-speed);
}

@keyframes sammy-zoom {
  0% { transform: translateX(0) scale(1); }
  50% { transform: translateX(30px) scale(1.1); }
  100% { transform: translateX(0) scale(1); }
}

.sammy-svg {
  width: 100%;
  height: auto;
}

/* Shell glow animation */
.sammy-svg.glowing .shell-base {
  animation: shell-pulse 1s ease-in-out infinite;
}

.sammy-svg.glowing .shell-swirl {
  animation: swirl-glow 0.5s ease-in-out infinite alternate;
}

@keyframes shell-pulse {
  0%, 100% { filter: drop-shadow(0 0 8px var(--magic-glow)); }
  50% { filter: drop-shadow(0 0 20px var(--magic-glow)); }
}

@keyframes swirl-glow {
  0% { stroke: #FFD700; stroke-width: 4; }
  100% { stroke: #FFF8DC; stroke-width: 5; }
}

/* Eye animations */
.sammy-svg .eye-white {
  animation: blink 4s ease-in-out infinite;
}

@keyframes blink {
  0%, 45%, 55%, 100% { transform: scaleY(1); }
  50% { transform: scaleY(0.1); }
}

/* Expression-based pupil positions */
.pupils.excited .pupil { animation: excited-eyes 0.3s infinite; }
.pupils.surprised .pupil { transform: scale(1.3); }
.pupils.tired .pupil { transform: translateY(2px); }

@keyframes excited-eyes {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-1px); }
}

/* Body breathing */
.snail-body {
  animation: breathe 3s ease-in-out infinite;
}

@keyframes breathe {
  0%, 100% { transform: scaleY(1); }
  50% { transform: scaleY(1.02); }
}

/* Slime trail */
.slime-trail {
  animation: slime-wobble 2s ease-in-out infinite;
}

@keyframes slime-wobble {
  0%, 100% { rx: 25; }
  50% { rx: 28; }
}

/* ============================================================================
   SPEED EFFECTS
   ============================================================================ */

/* Speed Lines */
.speed-lines {
  position: absolute;
  left: -50px;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.speed-line {
  width: 40px;
  height: 3px;
  background: linear-gradient(90deg, transparent, var(--magic-glow));
  border-radius: 2px;
  animation: speed-line-fly 0.3s ease-out forwards;
}

@keyframes speed-line-fly {
  0% { transform: translateX(50px); opacity: 0; }
  50% { opacity: 1; }
  100% { transform: translateX(-20px); opacity: 0; }
}

/* Speed Trail */
.speed-trail {
  position: absolute;
  left: -100px;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  gap: 5px;
}

.trail-segment {
  width: 20px;
  height: 20px;
  background: var(--sammy-shell);
  border-radius: 50%;
  animation: trail-fade 0.5s ease-out forwards;
}

@keyframes trail-fade {
  0% { transform: scale(1); opacity: 0.8; }
  100% { transform: scale(0.5); opacity: 0; }
}

/* Rainbow Trail */
.rainbow-trail {
  position: absolute;
  left: -150px;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  gap: 2px;
  opacity: 0.8;
}

.rainbow-stripe {
  width: 120px;
  height: 6px;
  border-radius: 3px;
  animation: rainbow-flow 0.8s ease-out forwards;
}

@keyframes rainbow-flow {
  0% { transform: translateX(150px) scaleX(0); }
  50% { transform: translateX(0) scaleX(1); }
  100% { transform: translateX(-50px) scaleX(0.5); opacity: 0; }
}

/* ============================================================================
   ZOOM BURST EFFECT
   ============================================================================ */

.zoom-burst {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 200;
  pointer-events: none;
}

.zoom-text {
  font-family: var(--font-display);
  font-size: clamp(4rem, 15vw, 8rem);
  font-weight: 700;
  color: var(--magic-glow);
  text-shadow: 
    3px 3px 0 var(--rainbow-1),
    6px 6px 0 var(--rainbow-3);
  animation: zoom-text-pop 0.6s var(--ease-bounce);
}

@keyframes zoom-text-pop {
  0% { transform: scale(0) rotate(-10deg); opacity: 0; }
  50% { transform: scale(1.2) rotate(5deg); opacity: 1; }
  100% { transform: scale(1) rotate(0deg); opacity: 0; }
}

.burst-ring {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  border: 4px solid var(--magic-glow);
  animation: ring-expand 0.6s ease-out forwards;
}

.ring-1 { width: 50px; height: 50px; }
.ring-2 { width: 100px; height: 100px; animation-delay: 0.1s; }
.ring-3 { width: 150px; height: 150px; animation-delay: 0.2s; }

@keyframes ring-expand {
  0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
  100% { transform: translate(-50%, -50%) scale(2); opacity: 0; }
}

.sparkle-burst {
  position: absolute;
  top: 50%;
  left: 50%;
  font-size: 1.5rem;
  animation: sparkle-fly 0.6s var(--ease-bounce) forwards;
}

@keyframes sparkle-fly {
  0% { opacity: 1; }
  100% { opacity: 0; transform: rotate(var(--angle)) translateY(-100px); }
}

/* ============================================================================
   SCENE-SPECIFIC STYLES
   ============================================================================ */

/* Opening Scene */
.scene-opening {
  background: linear-gradient(180deg, var(--sky-morning) 0%, #C8E6C9 70%, var(--grass) 100%);
}

.morning-sky {
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 80% 20%, #FFD93D 0%, transparent 20%);
}

.forest-bg {
  position: absolute;
  bottom: 10%;
  left: 0;
  right: 0;
  height: 40%;
}

.bg-mushroom {
  position: absolute;
  width: 40px;
  height: auto;
}

.bg-mushroom.m1 { left: 10%; bottom: 0; }
.bg-mushroom.m2 { right: 15%; bottom: 5%; transform: scale(0.8); }

.bg-flower {
  position: absolute;
  width: 30px;
  height: auto;
  animation: flower-sway 3s ease-in-out infinite;
}

.bg-flower.f1 { left: 20%; bottom: 0; }
.bg-flower.f2 { left: 50%; bottom: 2%; animation-delay: 0.5s; }
.bg-flower.f3 { right: 25%; bottom: 0; animation-delay: 1s; }

@keyframes flower-sway {
  0%, 100% { transform: rotate(-5deg); }
  50% { transform: rotate(5deg); }
}

.slow-sammy-intro {
  position: relative;
  z-index: 15;
  margin: 2rem 0;
}

.sammy-slow {
  animation: slow-crawl 4s ease-in-out infinite;
}

@keyframes slow-crawl {
  0%, 100% { transform: translateX(-10px); }
  50% { transform: translateX(10px); }
}

.story-title {
  font-family: var(--font-display);
  font-size: var(--text-title);
  color: var(--forest-green-dark);
  margin-bottom: 1rem;
  text-shadow: 2px 2px 0 rgba(255,255,255,0.5);
}

/* Story Text */
.story-text {
  position: relative;
  z-index: 20;
  margin: 1.5rem 0;
}

.scene-text {
  font-family: var(--font-display);
  font-size: var(--text-body);
  color: var(--text-dark);
  margin: 0.5rem 0;
  line-height: 1.4;
}

.scene-text.big-text {
  font-size: var(--text-big);
}

.scene-text.small {
  font-size: var(--text-small);
  opacity: 0.8;
}

.tap-hint {
  font-size: var(--text-small);
  color: var(--forest-green);
  margin-top: 1rem;
  animation: hint-pulse 2s ease-in-out infinite;
}

@keyframes hint-pulse {
  0%, 100% { opacity: 0.7; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.05); }
}

.scroll-hint {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  margin-top: 2rem;
  animation: scroll-bounce 2s ease-in-out infinite;
}

.hint-arrow {
  font-size: 2rem;
  color: var(--forest-green);
}

.hint-text {
  font-size: var(--text-small);
  color: var(--forest-green);
}

@keyframes scroll-bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(10px); }
}

/* Dew Drop Scene */
.scene-dew-discovery {
  background: linear-gradient(180deg, #E8F5E9 0%, #C8E6C9 100%);
}

.leaf-platform {
  position: relative;
  margin: 2rem 0;
}

.big-leaf {
  width: clamp(150px, 40vw, 250px);
}

.dew-drop {
  position: absolute;
  top: 20%;
  right: 20%;
  width: 40px;
  cursor: pointer;
  transition: transform 0.3s var(--ease-bounce);
}

.dew-drop:hover,
.dew-drop:focus {
  transform: scale(1.2);
}

.dew-drop.glowing .dew-shape {
  animation: dew-glow 1s ease-in-out infinite;
}

@keyframes dew-glow {
  0%, 100% { filter: drop-shadow(0 0 5px #87CEEB); }
  50% { filter: drop-shadow(0 0 15px #00BFFF); }
}

/* Magic Scene */
.scene-magic {
  background: radial-gradient(circle at center, #FFF8DC 0%, #FFE4B5 50%, #FFD700 100%);
}

.magic-scene {
  min-height: 100dvh;
  justify-content: center;
}

.magic-swirls {
  position: absolute;
  inset: 0;
  overflow: hidden;
}

.magic-swirl {
  position: absolute;
  width: 100px;
  height: 100px;
  border: 3px solid var(--magic-glow);
  border-radius: 50%;
  opacity: 0.3;
  animation: swirl-spin 3s linear infinite;
}

.magic-swirl:nth-child(odd) {
  animation-direction: reverse;
}

@keyframes swirl-spin {
  0% { transform: rotate(0deg) scale(0.5); }
  100% { transform: rotate(360deg) scale(1.5); opacity: 0; }
}

.sammy-transforming {
  animation: transform-pulse 1s var(--ease-bounce) infinite;
}

@keyframes transform-pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

.magic-text {
  z-index: 10;
}

.magic-word {
  font-size: clamp(2.5rem, 8vw, 4rem) !important;
  color: var(--magic-glow);
  text-shadow: 2px 2px 0 var(--rainbow-1), 4px 4px 0 var(--rainbow-3);
  animation: magic-word-pop 0.5s var(--ease-bounce);
}

@keyframes magic-word-pop {
  0% { transform: scale(0); }
  100% { transform: scale(1); }
}

/* Zoom Scene */
.scene-zoom {
  background: linear-gradient(135deg, var(--sky-morning) 0%, #B3E5FC 100%);
  cursor: pointer;
}

.zoom-scene {
  min-height: 100dvh;
  justify-content: center;
}

.zoom-effect-text {
  position: absolute;
  font-family: var(--font-display);
  font-size: clamp(3rem, 12vw, 6rem);
  font-weight: 700;
  color: var(--magic-glow);
  text-shadow: 3px 3px 0 var(--rainbow-1);
  animation: zoom-word-pulse 0.5s var(--ease-bounce) infinite;
  pointer-events: none;
}

@keyframes zoom-word-pulse {
  0%, 100% { transform: scale(1) rotate(-3deg); }
  50% { transform: scale(1.1) rotate(3deg); }
}

.sammy-zooming {
  animation: zoom-dash 0.3s var(--ease-speed) infinite;
}

@keyframes zoom-dash {
  0%, 100% { transform: translateX(0); }
  50% { transform: translateX(20px); }
}

/* Race Scene */
.scene-race-bunny {
  background: linear-gradient(180deg, var(--sky-morning) 0%, #C8E6C9 100%);
  cursor: pointer;
}

.race-track {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2rem;
  margin: 2rem 0;
}

.sammy-racing {
  animation: race-forward 0.5s var(--ease-speed) infinite;
}

@keyframes race-forward {
  0%, 100% { transform: translateX(-20px); }
  50% { transform: translateX(20px); }
}

.bunny-svg {
  width: clamp(60px, 15vw, 100px);
}

.bunny-racing {
  animation: bunny-hop 0.6s var(--ease-bounce) infinite;
}

.bunny-racing.surprised {
  animation: bunny-surprised 0.3s var(--ease-bounce);
}

@keyframes bunny-hop {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

@keyframes bunny-surprised {
  0% { transform: scale(1); }
  50% { transform: scale(1.1) translateX(-10px); }
  100% { transform: scale(1); }
}

/* River Scene */
.scene-river {
  background: linear-gradient(180deg, var(--sky-morning) 0%, #81D4FA 100%);
  cursor: pointer;
}

.river {
  position: relative;
  width: 100%;
  height: 100px;
  margin: 2rem 0;
}

.water-surface {
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, #4FC3F7 0%, #0288D1 100%);
  border-radius: 20px;
  overflow: hidden;
}

.water-ripple {
  position: absolute;
  width: 80px;
  height: 20px;
  border: 2px solid rgba(255,255,255,0.5);
  border-radius: 50%;
  animation: ripple-expand 2s ease-out infinite;
}

.water-ripple:nth-child(1) { left: 10%; top: 30%; }
.water-ripple:nth-child(2) { left: 30%; top: 50%; }
.water-ripple:nth-child(3) { left: 50%; top: 20%; }
.water-ripple:nth-child(4) { left: 70%; top: 60%; }
.water-ripple:nth-child(5) { left: 85%; top: 40%; }

@keyframes ripple-expand {
  0% { transform: scale(0.5); opacity: 1; }
  100% { transform: scale(1.5); opacity: 0; }
}

.splash-effects {
  position: absolute;
  top: -30px;
  left: 50%;
  transform: translateX(-50%);
}

.splash-drop {
  position: absolute;
  font-size: 1.5rem;
  animation: splash-fly 0.8s var(--ease-bounce) infinite;
}

.splash-drop:nth-child(odd) { animation-direction: alternate; }

@keyframes splash-fly {
  0% { transform: translateY(30px) scale(0); opacity: 0; }
  50% { transform: translateY(-20px) scale(1); opacity: 1; }
  100% { transform: translateY(30px) scale(0.5); opacity: 0; }
}

.sammy-splashing {
  animation: splash-bounce 0.4s var(--ease-bounce);
}

@keyframes splash-bounce {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  50% { transform: translateY(-30px) rotate(10deg); }
}

/* Loop Scene */
.scene-loop {
  background: radial-gradient(circle at center, #C8E6C9 0%, var(--forest-green-light) 100%);
  cursor: pointer;
}

.loop-scene {
  position: relative;
  min-height: 100dvh;
}

.big-tree-svg {
  width: clamp(150px, 40vw, 250px);
  margin: 0 auto;
}

.loop-path {
  position: absolute;
  width: 200px;
  height: 200px;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.loop-path .sammy-container {
  position: absolute;
  width: 60px;
}

.loop-0 .sammy-container { top: 0; left: 50%; transform: translateX(-50%); }
.loop-1 .sammy-container { top: 50%; right: 0; transform: translateY(-50%); }
.loop-2 .sammy-container { bottom: 0; left: 50%; transform: translateX(-50%) scaleX(-1); }
.loop-3 .sammy-container { top: 50%; left: 0; transform: translateY(-50%) scaleX(-1); }

.sammy-looping {
  animation: loop-spin 2s linear infinite;
}

@keyframes loop-spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.loop-counter {
  margin-top: 1rem;
  padding: 0.5rem 1rem;
  background: rgba(255,255,255,0.9);
  border-radius: 20px;
  font-family: var(--font-display);
  font-size: 1.25rem;
}

/* Birds Scene */
.scene-birds {
  background: linear-gradient(180deg, var(--sky-morning) 0%, #B3E5FC 100%);
  cursor: pointer;
}

.birds-group {
  display: flex;
  gap: 1rem;
  margin: 2rem 0;
}

.bird-svg {
  width: clamp(40px, 10vw, 60px);
}

.bird {
  animation: bird-float 2s ease-in-out infinite;
}

.bird.b1 { animation-delay: 0s; }
.bird.b2 { animation-delay: 0.3s; }
.bird.b3 { animation-delay: 0.6s; }

@keyframes bird-float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.bird.startled {
  animation: bird-startle 0.5s var(--ease-bounce) forwards;
}

@keyframes bird-startle {
  0% { transform: translateY(0) rotate(0deg); }
  50% { transform: translateY(-30px) rotate(-15deg); }
  100% { transform: translateY(-50px) rotate(0deg); opacity: 0; }
}

.bird-svg .wing {
  animation: wing-flap 0.2s ease-in-out infinite;
}

@keyframes wing-flap {
  0%, 100% { transform: rotate(0deg); }
  50% { transform: rotate(-20deg); }
}

/* Hill Scene */
.scene-hill {
  background: linear-gradient(180deg, var(--sky-morning) 0%, var(--grass) 100%);
  cursor: pointer;
}

.hill {
  width: 100%;
  margin: 2rem 0;
}

.hill-svg {
  width: 100%;
  max-width: 400px;
}

.sammy-climbing {
  animation: climb-up 1s var(--ease-smooth) infinite;
}

@keyframes climb-up {
  0%, 100% { transform: translateY(0) rotate(-10deg); }
  50% { transform: translateY(-30px) rotate(10deg); }
}

/* Rainbow Scene */
.scene-rainbow {
  background: linear-gradient(180deg, 
    #FF6B6B 0%, 
    #FFD93D 20%, 
    #6BCB77 40%, 
    #4D96FF 60%, 
    #9B59B6 80%,
    #FF6B6B 100%
  );
  background-size: 100% 200%;
  animation: rainbow-bg 5s ease-in-out infinite;
  cursor: pointer;
}

@keyframes rainbow-bg {
  0%, 100% { background-position: 0% 0%; }
  50% { background-position: 0% 100%; }
}

.sammy-rainbow {
  animation: rainbow-zoom 0.5s var(--ease-speed) infinite;
}

@keyframes rainbow-zoom {
  0%, 100% { transform: translateX(-30px) rotate(-5deg); }
  50% { transform: translateX(30px) rotate(5deg); }
}

/* Knot Scene */
.scene-knot {
  background: radial-gradient(circle at center, #FFF8DC 0%, #FFE4B5 100%);
}

.dizzy-stars {
  position: absolute;
  top: 20%;
  left: 50%;
  transform: translateX(-50%);
}

.dizzy-star {
  position: absolute;
  font-size: 2rem;
  animation: star-orbit 1.5s linear infinite;
}

.dizzy-star:nth-child(1) { animation-delay: 0s; }
.dizzy-star:nth-child(2) { animation-delay: 0.3s; }
.dizzy-star:nth-child(3) { animation-delay: 0.6s; }
.dizzy-star:nth-child(4) { animation-delay: 0.9s; }
.dizzy-star:nth-child(5) { animation-delay: 1.2s; }

@keyframes star-orbit {
  0% { transform: rotate(0deg) translateX(50px) rotate(0deg); }
  100% { transform: rotate(360deg) translateX(50px) rotate(-360deg); }
}

.sammy-dizzy {
  animation: dizzy-wobble 0.5s ease-in-out infinite;
}

@keyframes dizzy-wobble {
  0%, 100% { transform: rotate(-10deg); }
  50% { transform: rotate(10deg); }
}

/* Slowing Scene */
.scene-slowing {
  background: linear-gradient(180deg, #FFE4B5 0%, #FFCC80 100%);
}

.slowing-scene {
  transition: all 1s ease-out;
}

.sammy-slowing {
  animation: slow-down 3s ease-out forwards;
}

@keyframes slow-down {
  0% { transform: translateX(-20px); }
  100% { transform: translateX(0); }
}

.slow-text .scene-text {
  animation: text-fade-slow 2s ease-out forwards;
}

@keyframes text-fade-slow {
  0% { opacity: 0; }
  100% { opacity: 1; }
}

/* Ending Scene */
.scene-ending {
  background: linear-gradient(180deg, var(--sky-sunset) 0%, #FFE0B2 50%, var(--grass) 100%);
}

.sunset-sky {
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 50% 30%, #FFD93D 0%, transparent 40%);
  opacity: 0.5;
}

.peaceful-setting {
  position: relative;
  margin: 2rem 0;
}

.resting-leaf {
  width: clamp(150px, 40vw, 220px);
}

.sammy-resting {
  position: absolute;
  top: 30%;
  left: 50%;
  transform: translateX(-50%);
  animation: gentle-breathe 4s ease-in-out infinite;
}

@keyframes gentle-breathe {
  0%, 100% { transform: translateX(-50%) scale(1); }
  50% { transform: translateX(-50%) scale(1.02); }
}

.ending-flowers {
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin: 1rem 0;
}

.end-flower {
  width: 40px;
  animation: flower-sway 3s ease-in-out infinite;
}

.ending-text {
  margin-top: 2rem;
}

.ending-message {
  font-size: var(--text-big) !important;
  color: var(--forest-green-dark);
  font-style: italic;
}

.the-end {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  margin-top: 2rem;
  font-family: var(--font-display);
  font-size: var(--text-big);
  color: var(--forest-green-dark);
}

.end-snail {
  font-size: 2rem;
  animation: snail-wave 2s ease-in-out infinite;
}

@keyframes snail-wave {
  0%, 100% { transform: rotate(-5deg); }
  50% { transform: rotate(5deg); }
}

/* ============================================================================
   PARENT NOTE SECTION
   ============================================================================ */

.scene-parent-note {
  background: linear-gradient(180deg, #E8F5E9 0%, #C8E6C9 100%);
  min-height: auto;
  padding: 4rem 2rem;
}

.parent-section {
  max-width: 600px;
}

.parent-title {
  font-family: var(--font-display);
  font-size: var(--text-big);
  color: var(--forest-green-dark);
  margin-bottom: 1.5rem;
}

.parent-message {
  background: white;
  border-radius: 16px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  box-shadow: 0 4px 15px rgba(0,0,0,0.08);
}

.parent-message p {
  font-size: 1rem;
  line-height: 1.6;
  margin-bottom: 1rem;
}

.parent-message p:last-child {
  margin-bottom: 0;
}

.activity-ideas {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.activity {
  display: flex;
  align-items: center;
  gap: 1rem;
  background: white;
  border-radius: 12px;
  padding: 1rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}

.activity-icon {
  font-size: 1.5rem;
}

.activity span:last-child {
  font-size: 0.95rem;
  color: var(--text-dark);
}

/* ============================================================================
   CREDITS
   ============================================================================ */

.credits-section {
  background: linear-gradient(180deg, #C8E6C9 0%, var(--forest-green-light) 100%);
  padding: 4rem 2rem 6rem;
  text-align: center;
}

.credits-content {
  max-width: 400px;
  margin: 0 auto;
}

.credits-made {
  font-size: 1rem;
  color: var(--forest-green-dark);
  opacity: 0.8;
}

.credits-esy {
  font-family: var(--font-display);
  font-size: 1.5rem;
  color: var(--forest-green-dark);
  margin: 0.5rem 0;
}

.credits-sammy {
  font-size: 3rem;
  margin: 1rem 0;
  animation: credits-snail-slide 3s ease-in-out infinite;
}

@keyframes credits-snail-slide {
  0%, 100% { transform: translateX(-20px); }
  50% { transform: translateX(20px); }
}

.credits-tagline {
  font-size: 0.9rem;
  color: var(--forest-green-dark);
  font-style: italic;
  margin-bottom: 1.5rem;
}

.credits-link {
  display: inline-block;
  padding: 0.75rem 1.5rem;
  background: white;
  color: var(--forest-green-dark);
  text-decoration: none;
  border-radius: 25px;
  font-weight: 600;
  transition: all 0.2s var(--ease-smooth);
}

.credits-link:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

/* ============================================================================
   LOADING STATE
   ============================================================================ */

.sammy-loading {
  min-height: 100dvh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(180deg, var(--sky-morning) 0%, #C8E6C9 100%);
}

.sammy-loading::after {
  content: "üêå";
  font-size: 4rem;
  animation: loading-crawl 2s ease-in-out infinite;
}

@keyframes loading-crawl {
  0%, 100% { transform: translateX(-20px); }
  50% { transform: translateX(20px); }
}

/* ============================================================================
   RESPONSIVE
   ============================================================================ */

@media (max-width: 768px) {
  .sammy-section {
    padding: 1.5rem;
    padding-top: calc(1.5rem + 50px);
  }
  
  .race-track {
    flex-direction: column;
    gap: 1rem;
  }
  
  .birds-group {
    flex-wrap: wrap;
    justify-content: center;
  }
}

@media (max-width: 480px) {
  .sammy-section {
    padding: 1rem;
    padding-top: calc(1rem + 45px);
  }
  
  .snail-progress {
    padding: 0.5rem 0.75rem;
  }
  
  .progress-track {
    height: 10px;
  }
  
  .progress-snail {
    font-size: 1.25rem;
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Safe areas */
@supports (padding-top: env(safe-area-inset-top)) {
  .snail-progress {
    padding-top: calc(0.75rem + env(safe-area-inset-top));
  }
  
  .credits-section {
    padding-bottom: calc(6rem + env(safe-area-inset-bottom));
  }
}

